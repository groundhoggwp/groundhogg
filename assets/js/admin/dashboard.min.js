!function($,e){e=Object.assign(e,{report:null,reportId:null,init:function(){$(document).on("click",".export",function(t){e.report=$(t.target).closest(".postbox"),console.log(e.report),e.setup(),e.export()})},setup:function(){this.reportId=this.report.attr("id")},showSpinner:function(){this.report.find(".spinner").css("visibility","visible")},hideSpinner:function(){this.report.find(".spinner").css("visibility","hidden")},export:function(){this.showSpinner(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"wpgh_export_"+e.reportId,date_range:e.date_range,custom_date_range_start:e.custom_date_range_start,custom_date_range_end:e.custom_date_range_end},success:function(t){var n=Papa.unparse(t,{quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:"\r\n"});e.makeFile(n),e.hideSpinner()},failure:function(e){alert(e)}})},makeFile:function(e){var t=document.createElement("a");t.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(e));var n=new Date;n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds();t.setAttribute("download","report-"+this.reportId+".csv"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}),$(function(){e.init()})}(jQuery,wpghDashboard);