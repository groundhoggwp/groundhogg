{"version":3,"sources":["@wordpress/rich-text/src/remove-line-separator.js"],"names":["LINE_SEPARATOR","isCollapsed","remove","removeLineSeparator","value","backward","replacements","text","start","end","collapsed","index","removeStart","removeEnd","newValue","length","newReplacements","slice"],"mappings":";;;;;;AAAA;;;AAIA,SAASA,cAAT,QAA+B,sBAA/B;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,MAAT,QAAuB,UAAvB;AAEA;;AAEA;;;;;;;;;;;;;;AAaA,OAAO,SAASC,mBAAT,CAA8BC,KAA9B,EAAuD;AAAA,MAAlBC,QAAkB,uEAAP,IAAO;AAAA,MACrDC,YADqD,GAClBF,KADkB,CACrDE,YADqD;AAAA,MACvCC,IADuC,GAClBH,KADkB,CACvCG,IADuC;AAAA,MACjCC,KADiC,GAClBJ,KADkB,CACjCI,KADiC;AAAA,MAC1BC,GAD0B,GAClBL,KADkB,CAC1BK,GAD0B;AAE7D,MAAMC,SAAS,GAAGT,WAAW,CAAEG,KAAF,CAA7B;AACA,MAAIO,KAAK,GAAGH,KAAK,GAAG,CAApB;AACA,MAAII,WAAW,GAAGF,SAAS,GAAGF,KAAK,GAAG,CAAX,GAAeA,KAA1C;AACA,MAAIK,SAAS,GAAGJ,GAAhB;;AACA,MAAK,CAAEJ,QAAP,EAAkB;AACjBM,IAAAA,KAAK,GAAGF,GAAR;AACAG,IAAAA,WAAW,GAAGJ,KAAd;AACAK,IAAAA,SAAS,GAAGH,SAAS,GAAGD,GAAG,GAAG,CAAT,GAAaA,GAAlC;AACA;;AAED,MAAKF,IAAI,CAAEI,KAAF,CAAJ,KAAkBX,cAAvB,EAAwC;AACvC;AACA;;AAED,MAAIc,QAAJ,CAhB6D,CAiB7D;AACA;;AACA,MAAKJ,SAAS,IAAIJ,YAAY,CAAEK,KAAF,CAAzB,IAAsCL,YAAY,CAAEK,KAAF,CAAZ,CAAsBI,MAAjE,EAA0E;AACzE,QAAMC,eAAe,GAAGV,YAAY,CAACW,KAAb,EAAxB;AAEAD,IAAAA,eAAe,CAAEL,KAAF,CAAf,GAA2BL,YAAY,CAAEK,KAAF,CAAZ,CAAsBM,KAAtB,CAA6B,CAA7B,EAAgC,CAAC,CAAjC,CAA3B;AACAH,IAAAA,QAAQ,mCACJV,KADI;AAEPE,MAAAA,YAAY,EAAEU;AAFP,MAAR;AAIA,GARD,MAQO;AACNF,IAAAA,QAAQ,GAAGZ,MAAM,CAAEE,KAAF,EAASQ,WAAT,EAAsBC,SAAtB,CAAjB;AACA;;AACD,SAAOC,QAAP;AACA","sourcesContent":["/**\n * Internal dependencies\n */\n\nimport { LINE_SEPARATOR } from './special-characters';\nimport { isCollapsed } from './is-collapsed';\nimport { remove } from './remove';\n\n/** @typedef {import('./create').RichTextValue} RichTextValue */\n\n/**\n * Removes a line separator character, if existing, from a Rich Text value at\n * the current indices. If no line separator exists on the indices it will\n * return undefined.\n *\n * @param {RichTextValue} value    Value to modify.\n * @param {boolean}       backward Indicates if are removing from the start\n *                                 index or the end index.\n *\n * @return {RichTextValue|undefined} A new value with the line separator\n *                                   removed. Or undefined if no line separator\n *                                   is found on the position.\n */\nexport function removeLineSeparator( value, backward = true ) {\n\tconst { replacements, text, start, end } = value;\n\tconst collapsed = isCollapsed( value );\n\tlet index = start - 1;\n\tlet removeStart = collapsed ? start - 1 : start;\n\tlet removeEnd = end;\n\tif ( ! backward ) {\n\t\tindex = end;\n\t\tremoveStart = start;\n\t\tremoveEnd = collapsed ? end + 1 : end;\n\t}\n\n\tif ( text[ index ] !== LINE_SEPARATOR ) {\n\t\treturn;\n\t}\n\n\tlet newValue;\n\t// If the line separator that is about te be removed\n\t// contains wrappers, remove the wrappers first.\n\tif ( collapsed && replacements[ index ] && replacements[ index ].length ) {\n\t\tconst newReplacements = replacements.slice();\n\n\t\tnewReplacements[ index ] = replacements[ index ].slice( 0, -1 );\n\t\tnewValue = {\n\t\t\t...value,\n\t\t\treplacements: newReplacements,\n\t\t};\n\t} else {\n\t\tnewValue = remove( value, removeStart, removeEnd );\n\t}\n\treturn newValue;\n}\n"]}