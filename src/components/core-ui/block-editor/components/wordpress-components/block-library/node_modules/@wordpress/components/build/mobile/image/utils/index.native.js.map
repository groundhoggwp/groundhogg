{"version":3,"sources":["@wordpress/components/src/mobile/image/utils/index.native.js"],"names":["getFocalPointOffset","imageRatio","container","imageSize","focusPoint","containerCenter","Math","floor","scaledImage","focus","focusOffset","offsetRest","containerRest","getImageWithFocalPointStyles","focalPoint","containerSize","originalImageData","imageStyle","horizontalOffset","verticalOffset","widthRatio","width","heightRatio","height","resizeMode","x","undefined","left","y","top"],"mappings":";;;;;;;AAAA,SAASA,mBAAT,CAA8BC,UAA9B,EAA0CC,SAA1C,EAAqDC,SAArD,EAAgEC,UAAhE,EAA6E;AAC5E,MAAMC,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAYL,SAAS,GAAG,CAAxB,CAAxB;AACA,MAAMM,WAAW,GAAGF,IAAI,CAACC,KAAL,CAAYJ,SAAS,GAAGF,UAAxB,CAApB;AACA,MAAMQ,KAAK,GAAGH,IAAI,CAACC,KAAL,CAAYH,UAAU,GAAGI,WAAzB,CAAd;AACA,MAAIE,WAAW,GAAGD,KAAK,GAAGJ,eAA1B;AACA,MAAMM,UAAU,GAAGH,WAAW,GAAGC,KAAjC;AACA,MAAMG,aAAa,GAAGV,SAAS,GAAGG,eAAlC;;AAEA,MAAKM,UAAU,GAAGC,aAAlB,EAAkC;AACjCF,IAAAA,WAAW,IAAIE,aAAa,GAAGD,UAA/B;AACA;;AAED,MAAKD,WAAW,GAAG,CAAnB,EAAuB;AACtBA,IAAAA,WAAW,GAAG,CAAd;AACA;;AAED,SAAO,CAACA,WAAR;AACA;;AAEM,SAASG,4BAAT,CACNC,UADM,EAENC,aAFM,EAGNC,iBAHM,EAIL;AACD,MAAMC,UAAU,GAAG,EAAnB;;AACA,MAAKH,UAAU,IAAIC,aAAd,IAA+BC,iBAApC,EAAwD;AACvD,QAAIE,gBAAgB,GAAG,CAAvB;AACA,QAAIC,cAAc,GAAG,CAArB;AACA,QAAMC,UAAU,GAAGJ,iBAAiB,CAACK,KAAlB,GAA0BN,aAAa,CAACM,KAA3D;AACA,QAAMC,WAAW,GAAGN,iBAAiB,CAACO,MAAlB,GAA2BR,aAAa,CAACQ,MAA7D;AAEAN,IAAAA,UAAU,CAACO,UAAX,GAAwB,SAAxB;;AAEA,QAAKJ,UAAU,GAAGE,WAAlB,EAAgC;AAC/BJ,MAAAA,gBAAgB,GAAGlB,mBAAmB,CACrCsB,WADqC,EAErCP,aAAa,CAACM,KAFuB,EAGrCL,iBAAiB,CAACK,KAHmB,EAIrCP,UAAU,CAACW,CAJ0B,CAAtC;AAMAR,MAAAA,UAAU,CAACI,KAAX,GAAmBK,SAAnB;AACAT,MAAAA,UAAU,CAACU,IAAX,GAAkBT,gBAAlB;AACA,KATD,MASO,IAAKE,UAAU,GAAGE,WAAlB,EAAgC;AACtCH,MAAAA,cAAc,GAAGnB,mBAAmB,CACnCoB,UADmC,EAEnCL,aAAa,CAACQ,MAFqB,EAGnCP,iBAAiB,CAACO,MAHiB,EAInCT,UAAU,CAACc,CAJwB,CAApC;AAMAX,MAAAA,UAAU,CAACM,MAAX,GAAoBG,SAApB;AACAT,MAAAA,UAAU,CAACY,GAAX,GAAiBV,cAAjB;AACA;;AAED,WAAOF,UAAP;AACA;;AAED,SAAOA,UAAP;AACA","sourcesContent":["function getFocalPointOffset( imageRatio, container, imageSize, focusPoint ) {\n\tconst containerCenter = Math.floor( container / 2 );\n\tconst scaledImage = Math.floor( imageSize / imageRatio );\n\tconst focus = Math.floor( focusPoint * scaledImage );\n\tlet focusOffset = focus - containerCenter;\n\tconst offsetRest = scaledImage - focus;\n\tconst containerRest = container - containerCenter;\n\n\tif ( offsetRest < containerRest ) {\n\t\tfocusOffset -= containerRest - offsetRest;\n\t}\n\n\tif ( focusOffset < 0 ) {\n\t\tfocusOffset = 0;\n\t}\n\n\treturn -focusOffset;\n}\n\nexport function getImageWithFocalPointStyles(\n\tfocalPoint,\n\tcontainerSize,\n\toriginalImageData\n) {\n\tconst imageStyle = {};\n\tif ( focalPoint && containerSize && originalImageData ) {\n\t\tlet horizontalOffset = 0;\n\t\tlet verticalOffset = 0;\n\t\tconst widthRatio = originalImageData.width / containerSize.width;\n\t\tconst heightRatio = originalImageData.height / containerSize.height;\n\n\t\timageStyle.resizeMode = 'stretch';\n\n\t\tif ( widthRatio > heightRatio ) {\n\t\t\thorizontalOffset = getFocalPointOffset(\n\t\t\t\theightRatio,\n\t\t\t\tcontainerSize.width,\n\t\t\t\toriginalImageData.width,\n\t\t\t\tfocalPoint.x\n\t\t\t);\n\t\t\timageStyle.width = undefined;\n\t\t\timageStyle.left = horizontalOffset;\n\t\t} else if ( widthRatio < heightRatio ) {\n\t\t\tverticalOffset = getFocalPointOffset(\n\t\t\t\twidthRatio,\n\t\t\t\tcontainerSize.height,\n\t\t\t\toriginalImageData.height,\n\t\t\t\tfocalPoint.y\n\t\t\t);\n\t\t\timageStyle.height = undefined;\n\t\t\timageStyle.top = verticalOffset;\n\t\t}\n\n\t\treturn imageStyle;\n\t}\n\n\treturn imageStyle;\n}\n"]}