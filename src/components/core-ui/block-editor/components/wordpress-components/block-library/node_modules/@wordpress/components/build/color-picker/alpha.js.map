{"version":3,"sources":["@wordpress/components/src/color-picker/alpha.js"],"names":["Alpha","arguments","container","increase","bind","decrease","handleChange","handleMouseDown","handleMouseUp","unbindEventListeners","amount","props","hsl","onChange","noop","parseInt","change","h","s","l","a","source","intValue","e","current","window","addEventListener","event","keyCode","TAB","preventDefault","removeEventListener","rgb","rgbString","r","g","b","gradient","background","pointerLocation","left","shortcuts","up","right","pageup","end","down","pagedown","home","preventKeyEvents","Component"],"mappings":"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","sourcesContent":["/**\n * Parts of this source were derived and modified from react-color,\n * released under the MIT license.\n *\n * https://github.com/casesandberg/react-color/\n *\n * Copyright (c) 2015 Case Sandberg\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { TAB } from '@wordpress/keycodes';\nimport { pure } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { calculateAlphaChange } from './utils';\nimport KeyboardShortcuts from '../keyboard-shortcuts';\n\nexport class Alpha extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.container = createRef();\n\t\tthis.increase = this.increase.bind( this );\n\t\tthis.decrease = this.decrease.bind( this );\n\t\tthis.handleChange = this.handleChange.bind( this );\n\t\tthis.handleMouseDown = this.handleMouseDown.bind( this );\n\t\tthis.handleMouseUp = this.handleMouseUp.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.unbindEventListeners();\n\t}\n\n\tincrease( amount = 0.01 ) {\n\t\tconst { hsl, onChange = noop } = this.props;\n\t\tamount = parseInt( amount * 100, 10 );\n\t\tconst change = {\n\t\t\th: hsl.h,\n\t\t\ts: hsl.s,\n\t\t\tl: hsl.l,\n\t\t\ta: ( parseInt( hsl.a * 100, 10 ) + amount ) / 100,\n\t\t\tsource: 'rgb',\n\t\t};\n\t\tonChange( change );\n\t}\n\n\tdecrease( amount = 0.01 ) {\n\t\tconst { hsl, onChange = noop } = this.props;\n\t\tconst intValue =\n\t\t\tparseInt( hsl.a * 100, 10 ) - parseInt( amount * 100, 10 );\n\t\tconst change = {\n\t\t\th: hsl.h,\n\t\t\ts: hsl.s,\n\t\t\tl: hsl.l,\n\t\t\ta: hsl.a <= amount ? 0 : intValue / 100,\n\t\t\tsource: 'rgb',\n\t\t};\n\t\tonChange( change );\n\t}\n\n\thandleChange( e ) {\n\t\tconst { onChange = noop } = this.props;\n\t\tconst change = calculateAlphaChange(\n\t\t\te,\n\t\t\tthis.props,\n\t\t\tthis.container.current\n\t\t);\n\t\tif ( change ) {\n\t\t\tonChange( change, e );\n\t\t}\n\t}\n\n\thandleMouseDown( e ) {\n\t\tthis.handleChange( e );\n\t\twindow.addEventListener( 'mousemove', this.handleChange );\n\t\twindow.addEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\thandleMouseUp() {\n\t\tthis.unbindEventListeners();\n\t}\n\n\tpreventKeyEvents( event ) {\n\t\tif ( event.keyCode === TAB ) {\n\t\t\treturn;\n\t\t}\n\t\tevent.preventDefault();\n\t}\n\n\tunbindEventListeners() {\n\t\twindow.removeEventListener( 'mousemove', this.handleChange );\n\t\twindow.removeEventListener( 'mouseup', this.handleMouseUp );\n\t}\n\n\trender() {\n\t\tconst { rgb } = this.props;\n\t\tconst rgbString = `${ rgb.r },${ rgb.g },${ rgb.b }`;\n\t\tconst gradient = {\n\t\t\tbackground: `linear-gradient(to right, rgba(${ rgbString }, 0) 0%, rgba(${ rgbString }, 1) 100%)`,\n\t\t};\n\t\tconst pointerLocation = { left: `${ rgb.a * 100 }%` };\n\n\t\tconst shortcuts = {\n\t\t\tup: () => this.increase(),\n\t\t\tright: () => this.increase(),\n\t\t\t'shift+up': () => this.increase( 0.1 ),\n\t\t\t'shift+right': () => this.increase( 0.1 ),\n\t\t\tpageup: () => this.increase( 0.1 ),\n\t\t\tend: () => this.increase( 1 ),\n\t\t\tdown: () => this.decrease(),\n\t\t\tleft: () => this.decrease(),\n\t\t\t'shift+down': () => this.decrease( 0.1 ),\n\t\t\t'shift+left': () => this.decrease( 0.1 ),\n\t\t\tpagedown: () => this.decrease( 0.1 ),\n\t\t\thome: () => this.decrease( 1 ),\n\t\t};\n\n\t\treturn (\n\t\t\t<KeyboardShortcuts shortcuts={ shortcuts }>\n\t\t\t\t<div className=\"components-color-picker__alpha\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"components-color-picker__alpha-gradient\"\n\t\t\t\t\t\tstyle={ gradient }\n\t\t\t\t\t/>\n\t\t\t\t\t{ /* eslint-disable jsx-a11y/no-static-element-interactions */ }\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"components-color-picker__alpha-bar\"\n\t\t\t\t\t\tref={ this.container }\n\t\t\t\t\t\tonMouseDown={ this.handleMouseDown }\n\t\t\t\t\t\tonTouchMove={ this.handleChange }\n\t\t\t\t\t\tonTouchStart={ this.handleChange }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\t\t\trole=\"slider\"\n\t\t\t\t\t\t\taria-valuemax=\"1\"\n\t\t\t\t\t\t\taria-valuemin=\"0\"\n\t\t\t\t\t\t\taria-valuenow={ rgb.a }\n\t\t\t\t\t\t\taria-orientation=\"horizontal\"\n\t\t\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t\t\t'Alpha value, from 0 (transparent) to 1 (fully opaque).'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tclassName=\"components-color-picker__alpha-pointer\"\n\t\t\t\t\t\t\tstyle={ pointerLocation }\n\t\t\t\t\t\t\tonKeyDown={ this.preventKeyEvents }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ /* eslint-enable jsx-a11y/no-static-element-interactions */ }\n\t\t\t\t</div>\n\t\t\t</KeyboardShortcuts>\n\t\t);\n\t}\n}\n\nexport default pure( Alpha );\n"]}