{"version":3,"sources":["@wordpress/components/src/mobile/link-picker/index.native.js"],"names":["useState","SafeAreaView","TouchableOpacity","lowerCase","startsWith","__","BottomSheet","Icon","getProtocol","prependHTTP","link","cancelCircleFilled","usePreferredColorSchemeStyle","LinkPickerResults","NavigationHeader","styles","createDirectEntry","value","type","protocol","includes","isDirectEntry","title","url","LinkPicker","initialValue","onLinkPicked","cancel","onCancel","setValue","directEntry","pickLink","onSubmit","clear","omniCellStyle","omniCell","omniCellDark","iconStyle","icon","iconDark","height","omniInput","clearIcon","color"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useState } from 'react';\nimport { SafeAreaView, TouchableOpacity } from 'react-native';\nimport { lowerCase, startsWith } from 'lodash';\n\n/**\n * WordPress dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { BottomSheet, Icon } from '@wordpress/components';\nimport { getProtocol, prependHTTP } from '@wordpress/url';\nimport { link, cancelCircleFilled } from '@wordpress/icons';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport LinkPickerResults from './link-picker-results';\nimport NavigationHeader from '../bottom-sheet/navigation-header';\nimport styles from './styles.scss';\n\n// this creates a search suggestion for adding a url directly\nexport const createDirectEntry = ( value ) => {\n\tlet type = 'URL';\n\n\tconst protocol = lowerCase( getProtocol( value ) ) || '';\n\n\tif ( protocol.includes( 'mailto' ) ) {\n\t\ttype = 'mailto';\n\t}\n\n\tif ( protocol.includes( 'tel' ) ) {\n\t\ttype = 'tel';\n\t}\n\n\tif ( startsWith( value, '#' ) ) {\n\t\ttype = 'internal';\n\t}\n\n\treturn {\n\t\tisDirectEntry: true,\n\t\ttitle: value,\n\t\turl: type === 'URL' ? prependHTTP( value ) : value,\n\t\ttype,\n\t};\n};\n\nexport const LinkPicker = ( {\n\tvalue: initialValue,\n\tonLinkPicked,\n\tonCancel: cancel,\n} ) => {\n\tconst [ value, setValue ] = useState( initialValue );\n\tconst directEntry = createDirectEntry( value );\n\n\t// the title of a direct entry is displayed as the raw input value, but if we\n\t// are replacing empty text, we want to use the generated url\n\tconst pickLink = ( { title, url, isDirectEntry } ) => {\n\t\tonLinkPicked( { title: isDirectEntry ? url : title, url } );\n\t};\n\n\tconst onSubmit = () => {\n\t\tpickLink( directEntry );\n\t};\n\n\tconst clear = () => {\n\t\tsetValue( '' );\n\t};\n\n\tconst omniCellStyle = usePreferredColorSchemeStyle(\n\t\tstyles.omniCell,\n\t\tstyles.omniCellDark\n\t);\n\n\tconst iconStyle = usePreferredColorSchemeStyle(\n\t\tstyles.icon,\n\t\tstyles.iconDark\n\t);\n\n\treturn (\n\t\t<SafeAreaView style={ { height: '100%' } }>\n\t\t\t<NavigationHeader\n\t\t\t\tscreen={ __( 'Link to' ) }\n\t\t\t\tleftButtonOnPress={ cancel }\n\t\t\t\tapplyButtonOnPress={ onSubmit }\n\t\t\t\tisFullscreen\n\t\t\t/>\n\t\t\t<BottomSheet.Cell\n\t\t\t\ticon={ link }\n\t\t\t\tstyle={ omniCellStyle }\n\t\t\t\tvalueStyle={ styles.omniInput }\n\t\t\t\tvalue={ value }\n\t\t\t\tplaceholder={ __( 'Search or type URL' ) }\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoCorrect={ false }\n\t\t\t\tkeyboardType=\"url\"\n\t\t\t\tonChangeValue={ setValue }\n\t\t\t\tonSubmit={ onSubmit }\n\t\t\t\t/* eslint-disable-next-line jsx-a11y/no-autofocus */\n\t\t\t\tautoFocus={ true }\n\t\t\t\tseparatorType=\"none\"\n\t\t\t>\n\t\t\t\t{ value !== '' && (\n\t\t\t\t\t<TouchableOpacity\n\t\t\t\t\t\tonPress={ clear }\n\t\t\t\t\t\tstyle={ styles.clearIcon }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon={ cancelCircleFilled }\n\t\t\t\t\t\t\tfill={ iconStyle.color }\n\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t) }\n\t\t\t</BottomSheet.Cell>\n\t\t\t{ !! value && (\n\t\t\t\t<LinkPickerResults\n\t\t\t\t\tquery={ value }\n\t\t\t\t\tonLinkPicked={ pickLink }\n\t\t\t\t\tdirectEntry={ directEntry }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</SafeAreaView>\n\t);\n};\n"]}