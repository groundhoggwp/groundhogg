{"version":3,"sources":["@wordpress/block-editor/src/components/contrast-checker/index.js"],"names":["tinycolor","speak","__","Notice","useEffect","ContrastCheckerMessage","tinyBackgroundColor","tinyTextColor","backgroundColor","textColor","msg","getBrightness","ContrastChecker","fallbackBackgroundColor","fallbackTextColor","fontSize","isLargeText","hasTransparency","getAlpha","isReadable","level","size"],"mappings":";;AAAA;;;AAGA,OAAOA,SAAP,MAAsB,YAAtB;AAEA;;;;AAGA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,SAAT,QAA0B,oBAA1B;;AAEA,SAASC,sBAAT,OAKI;AAAA,MAJHC,mBAIG,QAJHA,mBAIG;AAAA,MAHHC,aAGG,QAHHA,aAGG;AAAA,MAFHC,eAEG,QAFHA,eAEG;AAAA,MADHC,SACG,QADHA,SACG;AACH,MAAMC,GAAG,GACRJ,mBAAmB,CAACK,aAApB,KAAsCJ,aAAa,CAACI,aAAd,EAAtC,GACGT,EAAE,CACF,0HADE,CADL,GAIGA,EAAE,CACF,0HADE,CALN,CADG,CAUH;AACA;AACA;AACA;;AACAE,EAAAA,SAAS,CAAE,YAAM;AAChBH,IAAAA,KAAK,CAAEC,EAAE,CAAE,wDAAF,CAAJ,CAAL;AACA,GAFQ,EAEN,CAAEM,eAAF,EAAmBC,SAAnB,CAFM,CAAT;AAIA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,MAAD;AACC,IAAA,aAAa,EAAG,IADjB;AAEC,IAAA,MAAM,EAAC,SAFR;AAGC,IAAA,aAAa,EAAG;AAHjB,KAKGC,GALH,CADD,CADD;AAWA;;AAED,SAASE,eAAT,QAOI;AAAA,MANHJ,eAMG,SANHA,eAMG;AAAA,MALHK,uBAKG,SALHA,uBAKG;AAAA,MAJHC,iBAIG,SAJHA,iBAIG;AAAA,MAHHC,QAGG,SAHHA,QAGG;AAAA,MAFHC,WAEG,SAFHA,WAEG;AAAA,MADHP,SACG,SADHA,SACG;;AACH,MACC,EAAID,eAAe,IAAIK,uBAAvB,KACA,EAAIJ,SAAS,IAAIK,iBAAjB,CAFD,EAGE;AACD,WAAO,IAAP;AACA;;AACD,MAAMR,mBAAmB,GAAGN,SAAS,CACpCQ,eAAe,IAAIK,uBADiB,CAArC;AAGA,MAAMN,aAAa,GAAGP,SAAS,CAAES,SAAS,IAAIK,iBAAf,CAA/B;AACA,MAAMG,eAAe,GACpBX,mBAAmB,CAACY,QAApB,OAAmC,CAAnC,IAAwCX,aAAa,CAACW,QAAd,OAA6B,CADtE;;AAGA,MACCD,eAAe,IACfjB,SAAS,CAACmB,UAAV,CAAsBb,mBAAtB,EAA2CC,aAA3C,EAA0D;AACzDa,IAAAA,KAAK,EAAE,IADkD;AAEzDC,IAAAA,IAAI,EACHL,WAAW,IAAMA,WAAW,KAAK,KAAhB,IAAyBD,QAAQ,IAAI,EAAtD,GACG,OADH,GAEG;AALqD,GAA1D,CAFD,EASE;AACD,WAAO,IAAP;AACA;;AAED,SACC,cAAC,sBAAD;AACC,IAAA,eAAe,EAAGP,eADnB;AAEC,IAAA,SAAS,EAAGC,SAFb;AAGC,IAAA,mBAAmB,EAAGH,mBAHvB;AAIC,IAAA,aAAa,EAAGC;AAJjB,IADD;AAQA;;AAED,eAAeK,eAAf","sourcesContent":["/**\n * External dependencies\n */\nimport tinycolor from 'tinycolor2';\n\n/**\n * WordPress dependencies\n */\nimport { speak } from '@wordpress/a11y';\nimport { __ } from '@wordpress/i18n';\nimport { Notice } from '@wordpress/components';\nimport { useEffect } from '@wordpress/element';\n\nfunction ContrastCheckerMessage( {\n\ttinyBackgroundColor,\n\ttinyTextColor,\n\tbackgroundColor,\n\ttextColor,\n} ) {\n\tconst msg =\n\t\ttinyBackgroundColor.getBrightness() < tinyTextColor.getBrightness()\n\t\t\t? __(\n\t\t\t\t\t'This color combination may be hard for people to read. Try using a darker background color and/or a brighter text color.'\n\t\t\t  )\n\t\t\t: __(\n\t\t\t\t\t'This color combination may be hard for people to read. Try using a brighter background color and/or a darker text color.'\n\t\t\t  );\n\n\t// Note: The `Notice` component can speak messages via its `spokenMessage`\n\t// prop, but the contrast checker requires granular control over when the\n\t// announcements are made. Notably, the message will be re-announced if a\n\t// new color combination is selected and the contrast is still insufficient.\n\tuseEffect( () => {\n\t\tspeak( __( 'This color combination may be hard for people to read.' ) );\n\t}, [ backgroundColor, textColor ] );\n\n\treturn (\n\t\t<div className=\"block-editor-contrast-checker\">\n\t\t\t<Notice\n\t\t\t\tspokenMessage={ null }\n\t\t\t\tstatus=\"warning\"\n\t\t\t\tisDismissible={ false }\n\t\t\t>\n\t\t\t\t{ msg }\n\t\t\t</Notice>\n\t\t</div>\n\t);\n}\n\nfunction ContrastChecker( {\n\tbackgroundColor,\n\tfallbackBackgroundColor,\n\tfallbackTextColor,\n\tfontSize, // font size value in pixels\n\tisLargeText,\n\ttextColor,\n} ) {\n\tif (\n\t\t! ( backgroundColor || fallbackBackgroundColor ) ||\n\t\t! ( textColor || fallbackTextColor )\n\t) {\n\t\treturn null;\n\t}\n\tconst tinyBackgroundColor = tinycolor(\n\t\tbackgroundColor || fallbackBackgroundColor\n\t);\n\tconst tinyTextColor = tinycolor( textColor || fallbackTextColor );\n\tconst hasTransparency =\n\t\ttinyBackgroundColor.getAlpha() !== 1 || tinyTextColor.getAlpha() !== 1;\n\n\tif (\n\t\thasTransparency ||\n\t\ttinycolor.isReadable( tinyBackgroundColor, tinyTextColor, {\n\t\t\tlevel: 'AA',\n\t\t\tsize:\n\t\t\t\tisLargeText || ( isLargeText !== false && fontSize >= 24 )\n\t\t\t\t\t? 'large'\n\t\t\t\t\t: 'small',\n\t\t} )\n\t) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ContrastCheckerMessage\n\t\t\tbackgroundColor={ backgroundColor }\n\t\t\ttextColor={ textColor }\n\t\t\ttinyBackgroundColor={ tinyBackgroundColor }\n\t\t\ttinyTextColor={ tinyTextColor }\n\t\t/>\n\t);\n}\n\nexport default ContrastChecker;\n"]}