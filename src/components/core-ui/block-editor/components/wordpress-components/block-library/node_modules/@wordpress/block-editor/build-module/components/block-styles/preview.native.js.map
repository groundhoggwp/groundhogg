{"version":3,"sources":["@wordpress/block-editor/src/components/block-styles/preview.native.js"],"names":["View","TouchableWithoutFeedback","Text","Dimensions","Animated","Easing","Image","BottomSheet","useState","useEffect","useRef","usePreferredColorSchemeStyle","styles","MAX_ITEM_WIDTH","HALF_COLUMN","StylePreview","onPress","isActive","style","url","itemWidth","setItemWidth","label","name","opacity","Value","current","onLayout","columnsNum","Math","floor","getWidth","addEventListener","removeEventListener","labelStyle","labelDark","animateOutline","setValue","timing","toValue","duration","useNativeDriver","easing","linear","start","innerOutlineStyle","innerOutline","innerOutlineDark","getOutline","outlineStyles","map","outlineStyle","container","width","imageWrapper","outline","image","uri","labelSelected"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tView,\n\tTouchableWithoutFeedback,\n\tText,\n\tDimensions,\n\tAnimated,\n\tEasing,\n\tImage,\n} from 'react-native';\n/**\n * WordPress dependencies\n */\nimport { BottomSheet } from '@wordpress/components';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst MAX_ITEM_WIDTH = 120;\nconst HALF_COLUMN = 0.5;\n\nfunction StylePreview( { onPress, isActive, style, url } ) {\n\tconst [ itemWidth, setItemWidth ] = useState( MAX_ITEM_WIDTH );\n\tconst { label, name } = style;\n\tconst opacity = useRef( new Animated.Value( 1 ) ).current;\n\n\tfunction onLayout() {\n\t\tconst columnsNum =\n\t\t\t// To indicate scroll availabilty, there is a need to display additional half the column\n\t\t\tMath.floor( BottomSheet.getWidth() / MAX_ITEM_WIDTH ) + HALF_COLUMN;\n\t\tsetItemWidth( BottomSheet.getWidth() / columnsNum );\n\t}\n\n\tuseEffect( () => {\n\t\tonLayout();\n\t\tDimensions.addEventListener( 'change', onLayout );\n\n\t\treturn () => {\n\t\t\tDimensions.removeEventListener( 'change', onLayout );\n\t\t};\n\t}, [] );\n\n\tconst labelStyle = usePreferredColorSchemeStyle(\n\t\tstyles.label,\n\t\tstyles.labelDark\n\t);\n\n\tconst animateOutline = () => {\n\t\topacity.setValue( 0 );\n\t\tAnimated.timing( opacity, {\n\t\t\ttoValue: 1,\n\t\t\tduration: 100,\n\t\t\tuseNativeDriver: true,\n\t\t\teasing: Easing.linear,\n\t\t} ).start();\n\t};\n\n\tconst innerOutlineStyle = usePreferredColorSchemeStyle(\n\t\tstyles.innerOutline,\n\t\tstyles.innerOutlineDark\n\t);\n\n\tconst getOutline = ( outlineStyles ) =>\n\t\toutlineStyles.map( ( outlineStyle ) => {\n\t\t\treturn (\n\t\t\t\t<Animated.View\n\t\t\t\t\tstyle={ [ outlineStyle, { opacity }, styles[ name ] ] }\n\t\t\t\t\tkey={ outlineStyle }\n\t\t\t\t/>\n\t\t\t);\n\t\t} );\n\n\treturn (\n\t\t<TouchableWithoutFeedback\n\t\t\tonPress={ () => {\n\t\t\t\tonPress();\n\t\t\t\tanimateOutline();\n\t\t\t} }\n\t\t>\n\t\t\t<View style={ [ styles.container, { width: itemWidth } ] }>\n\t\t\t\t<View style={ styles.imageWrapper }>\n\t\t\t\t\t{ isActive &&\n\t\t\t\t\t\tgetOutline( [ styles.outline, innerOutlineStyle ] ) }\n\t\t\t\t\t<Image\n\t\t\t\t\t\tstyle={ [ styles.image, styles[ name ] ] }\n\t\t\t\t\t\tsource={ { uri: url } }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t\t<Text\n\t\t\t\t\tstyle={ [ labelStyle, isActive && styles.labelSelected ] }\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</Text>\n\t\t\t</View>\n\t\t</TouchableWithoutFeedback>\n\t);\n}\n\nexport default StylePreview;\n"]}