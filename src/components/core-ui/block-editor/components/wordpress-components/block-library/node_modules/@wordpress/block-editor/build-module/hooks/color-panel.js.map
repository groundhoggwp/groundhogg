{"version":3,"sources":["@wordpress/block-editor/src/hooks/color-panel.js"],"names":["__","useState","useEffect","PanelColorGradientSettings","ContrastChecker","InspectorControls","getBlockDOMNode","getComputedStyle","node","ownerDocument","defaultView","ColorPanel","settings","clientId","enableContrastChecking","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","colorsDetectionElement","color","backgroundColorNode","backgroundColor","parentNode","nodeType","ELEMENT_NODE"],"mappings":";;;AAAA;;;AAGA,SAASA,EAAT,QAAmB,iBAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AAEA;;;;AAGA,OAAOC,0BAAP,MAAuC,8DAAvC;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,SAASC,eAAT,QAAgC,cAAhC;;AAEA,SAASC,gBAAT,CAA2BC,IAA3B,EAAkC;AACjC,SAAOA,IAAI,CAACC,aAAL,CAAmBC,WAAnB,CAA+BH,gBAA/B,CAAiDC,IAAjD,CAAP;AACA;;AAED,eAAe,SAASG,UAAT,OAIX;AAAA,MAHHC,QAGG,QAHHA,QAGG;AAAA,MAFHC,QAEG,QAFHA,QAEG;AAAA,mCADHC,sBACG;AAAA,MADHA,sBACG,sCADsB,IACtB;;AAAA,kBAC6Db,QAAQ,EADrE;AAAA;AAAA,MACKc,uBADL;AAAA,MAC8BC,0BAD9B;;AAAA,mBAEyCf,QAAQ,EAFjD;AAAA;AAAA,MAEKgB,aAFL;AAAA,MAEoBC,gBAFpB;;AAIHhB,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK,CAAEY,sBAAP,EAAgC;AAC/B;AACA;;AAED,QAAMK,sBAAsB,GAAGb,eAAe,CAAEO,QAAF,CAA9C;;AACA,QAAK,CAAEM,sBAAP,EAAgC;AAC/B;AACA;;AACDD,IAAAA,gBAAgB,CAAEX,gBAAgB,CAAEY,sBAAF,CAAhB,CAA2CC,KAA7C,CAAhB;AAEA,QAAIC,mBAAmB,GAAGF,sBAA1B;AACA,QAAIG,eAAe,GAAGf,gBAAgB,CAAEc,mBAAF,CAAhB,CACpBC,eADF;;AAEA,WACCA,eAAe,KAAK,kBAApB,IACAD,mBAAmB,CAACE,UADpB,IAEAF,mBAAmB,CAACE,UAApB,CAA+BC,QAA/B,KACCH,mBAAmB,CAACE,UAApB,CAA+BE,YAJjC,EAKE;AACDJ,MAAAA,mBAAmB,GAAGA,mBAAmB,CAACE,UAA1C;AACAD,MAAAA,eAAe,GAAGf,gBAAgB,CAAEc,mBAAF,CAAhB,CAChBC,eADF;AAEA;;AAEDN,IAAAA,0BAA0B,CAAEM,eAAF,CAA1B;AACA,GA1BQ,CAAT;AA4BA,SACC,cAAC,iBAAD,QACC,cAAC,0BAAD;AACC,IAAA,KAAK,EAAGtB,EAAE,CAAE,gBAAF,CADX;AAEC,IAAA,WAAW,EAAG,KAFf;AAGC,IAAA,QAAQ,EAAGY;AAHZ,KAKGE,sBAAsB,IACvB,cAAC,eAAD;AACC,IAAA,eAAe,EAAGC,uBADnB;AAEC,IAAA,SAAS,EAAGE;AAFb,IANF,CADD,CADD;AAgBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport PanelColorGradientSettings from '../components/colors-gradients/panel-color-gradient-settings';\nimport ContrastChecker from '../components/contrast-checker';\nimport InspectorControls from '../components/inspector-controls';\nimport { getBlockDOMNode } from '../utils/dom';\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nexport default function ColorPanel( {\n\tsettings,\n\tclientId,\n\tenableContrastChecking = true,\n} ) {\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\n\tconst [ detectedColor, setDetectedColor ] = useState();\n\n\tuseEffect( () => {\n\t\tif ( ! enableContrastChecking ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst colorsDetectionElement = getBlockDOMNode( clientId );\n\t\tif ( ! colorsDetectionElement ) {\n\t\t\treturn;\n\t\t}\n\t\tsetDetectedColor( getComputedStyle( colorsDetectionElement ).color );\n\n\t\tlet backgroundColorNode = colorsDetectionElement;\n\t\tlet backgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t.backgroundColor;\n\t\twhile (\n\t\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\n\t\t\tbackgroundColorNode.parentNode &&\n\t\t\tbackgroundColorNode.parentNode.nodeType ===\n\t\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\n\t\t) {\n\t\t\tbackgroundColorNode = backgroundColorNode.parentNode;\n\t\t\tbackgroundColor = getComputedStyle( backgroundColorNode )\n\t\t\t\t.backgroundColor;\n\t\t}\n\n\t\tsetDetectedBackgroundColor( backgroundColor );\n\t} );\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<PanelColorGradientSettings\n\t\t\t\ttitle={ __( 'Color settings' ) }\n\t\t\t\tinitialOpen={ false }\n\t\t\t\tsettings={ settings }\n\t\t\t>\n\t\t\t\t{ enableContrastChecking && (\n\t\t\t\t\t<ContrastChecker\n\t\t\t\t\t\tbackgroundColor={ detectedBackgroundColor }\n\t\t\t\t\t\ttextColor={ detectedColor }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelColorGradientSettings>\n\t\t</InspectorControls>\n\t);\n}\n"]}