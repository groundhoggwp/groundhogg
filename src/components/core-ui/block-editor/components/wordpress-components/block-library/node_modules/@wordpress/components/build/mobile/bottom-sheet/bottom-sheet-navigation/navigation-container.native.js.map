{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/bottom-sheet-navigation/navigation-container.native.js"],"names":["AnimationSpec","animation","config","duration","easing","Easing","ease","fadeConfig","current","cardStyle","opacity","progress","options","transitionSpec","open","close","headerShown","gestureEnabled","cardStyleInterpolator","ANIMATION_DURATION","BottomSheetNavigationContainer","children","animate","main","theme","Stack","context","BottomSheetNavigationContext","currentHeight","setCurrentHeight","backgroundStyle","styles","background","backgroundDark","_theme","DefaultTheme","colors","backgroundColor","setHeight","height","layout","screens","Children","map","child","props","name","otherProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Easing } from 'react-native';\nimport { NavigationContainer, DefaultTheme } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseContext,\n\tuseMemo,\n\tuseCallback,\n\tChildren,\n\tuseRef,\n} from '@wordpress/element';\n\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { performLayoutAnimation } from '../../layout-animation';\nimport {\n\tBottomSheetNavigationContext,\n\tBottomSheetNavigationProvider,\n} from './bottom-sheet-navigation-context';\n\nimport styles from './styles.scss';\n\nconst AnimationSpec = {\n\tanimation: 'timing',\n\tconfig: {\n\t\tduration: 200,\n\t\teasing: Easing.ease,\n\t},\n};\n\nconst fadeConfig = ( { current } ) => {\n\treturn {\n\t\tcardStyle: {\n\t\t\topacity: current.progress,\n\t\t},\n\t};\n};\n\nconst options = {\n\ttransitionSpec: {\n\t\topen: AnimationSpec,\n\t\tclose: AnimationSpec,\n\t},\n\theaderShown: false,\n\tgestureEnabled: false,\n\tcardStyleInterpolator: fadeConfig,\n};\n\nconst ANIMATION_DURATION = 190;\n\nfunction BottomSheetNavigationContainer( { children, animate, main, theme } ) {\n\tconst Stack = useRef( createStackNavigator() ).current;\n\tconst context = useContext( BottomSheetNavigationContext );\n\tconst [ currentHeight, setCurrentHeight ] = useState(\n\t\tcontext.currentHeight || 1\n\t);\n\n\tconst backgroundStyle = usePreferredColorSchemeStyle(\n\t\tstyles.background,\n\t\tstyles.backgroundDark\n\t);\n\n\tconst _theme = theme || {\n\t\t...DefaultTheme,\n\t\tcolors: {\n\t\t\t...DefaultTheme.colors,\n\t\t\tbackground: backgroundStyle.backgroundColor,\n\t\t},\n\t};\n\n\tconst setHeight = useCallback(\n\t\t( height, layout ) => {\n\t\t\t// The screen is fullHeight or changing from fullScreen to the default mode\n\t\t\tif (\n\t\t\t\t( typeof currentHeight === 'string' &&\n\t\t\t\t\ttypeof height !== 'string' ) ||\n\t\t\t\ttypeof height === 'string'\n\t\t\t) {\n\t\t\t\tperformLayoutAnimation( ANIMATION_DURATION );\n\t\t\t\tsetCurrentHeight( height );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( currentHeight !== height && height > 1 ) {\n\t\t\t\tif ( animate && layout && currentHeight === 1 ) {\n\t\t\t\t\tsetCurrentHeight( height );\n\t\t\t\t} else if ( animate ) {\n\t\t\t\t\tperformLayoutAnimation( ANIMATION_DURATION );\n\t\t\t\t\tsetCurrentHeight( height );\n\t\t\t\t} else {\n\t\t\t\t\tsetCurrentHeight( height );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[ currentHeight ]\n\t);\n\n\tconst screens = useMemo( () => {\n\t\treturn Children.map( children, ( child ) => {\n\t\t\tconst { name, ...otherProps } = child.props;\n\t\t\treturn (\n\t\t\t\t<Stack.Screen\n\t\t\t\t\tname={ name }\n\t\t\t\t\t{ ...otherProps }\n\t\t\t\t\tchildren={ () => child }\n\t\t\t\t/>\n\t\t\t);\n\t\t} );\n\t}, [ children ] );\n\n\treturn useMemo( () => {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ {\n\t\t\t\t\theight: currentHeight,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<BottomSheetNavigationProvider\n\t\t\t\t\tvalue={ {\n\t\t\t\t\t\tsetHeight,\n\t\t\t\t\t\tcurrentHeight,\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ main ? (\n\t\t\t\t\t\t<NavigationContainer theme={ _theme }>\n\t\t\t\t\t\t\t<Stack.Navigator screenOptions={ options }>\n\t\t\t\t\t\t\t\t{ screens }\n\t\t\t\t\t\t\t</Stack.Navigator>\n\t\t\t\t\t\t</NavigationContainer>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Stack.Navigator screenOptions={ options }>\n\t\t\t\t\t\t\t{ screens }\n\t\t\t\t\t\t</Stack.Navigator>\n\t\t\t\t\t) }\n\t\t\t\t</BottomSheetNavigationProvider>\n\t\t\t</View>\n\t\t);\n\t}, [ currentHeight, _theme ] );\n}\n\nexport default BottomSheetNavigationContainer;\n"]}