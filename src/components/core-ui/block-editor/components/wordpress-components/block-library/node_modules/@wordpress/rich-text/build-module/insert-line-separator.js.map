{"version":3,"sources":["@wordpress/rich-text/src/insert-line-separator.js"],"names":["getTextContent","insert","LINE_SEPARATOR","insertLineSeparator","value","startIndex","start","endIndex","end","beforeText","slice","previousLineSeparatorIndex","lastIndexOf","previousLineSeparatorFormats","replacements","valueToInsert","formats","text"],"mappings":"AAAA;;;AAIA,SAASA,cAAT,QAA+B,oBAA/B;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AAEA;;AAEA;;;;;;;;;;;;AAWA,OAAO,SAASC,mBAAT,CACNC,KADM,EAIL;AAAA,MAFDC,UAEC,uEAFYD,KAAK,CAACE,KAElB;AAAA,MADDC,QACC,uEADUH,KAAK,CAACI,GAChB;AACD,MAAMC,UAAU,GAAGT,cAAc,CAAEI,KAAF,CAAd,CAAwBM,KAAxB,CAA+B,CAA/B,EAAkCL,UAAlC,CAAnB;AACA,MAAMM,0BAA0B,GAAGF,UAAU,CAACG,WAAX,CAAwBV,cAAxB,CAAnC;AACA,MAAMW,4BAA4B,GACjCT,KAAK,CAACU,YAAN,CAAoBH,0BAApB,CADD;AAEA,MAAIG,YAAY,GAAG,GAAnB;;AAEA,MAAKD,4BAAL,EAAoC;AACnCC,IAAAA,YAAY,GAAG,CAAED,4BAAF,CAAf;AACA;;AAED,MAAME,aAAa,GAAG;AACrBC,IAAAA,OAAO,EAAE,GADY;AAErBF,IAAAA,YAAY,EAAZA,YAFqB;AAGrBG,IAAAA,IAAI,EAAEf;AAHe,GAAtB;AAMA,SAAOD,MAAM,CAAEG,KAAF,EAASW,aAAT,EAAwBV,UAAxB,EAAoCE,QAApC,CAAb;AACA","sourcesContent":["/**\n * Internal dependencies\n */\n\nimport { getTextContent } from './get-text-content';\nimport { insert } from './insert';\nimport { LINE_SEPARATOR } from './special-characters';\n\n/** @typedef {import('./create').RichTextValue} RichTextValue */\n\n/**\n * Insert a line break character into a Rich Text value at the given\n * `startIndex`. Any content between `startIndex` and `endIndex` will be\n * removed. Indices are retrieved from the selection if none are provided.\n *\n * @param {RichTextValue} value        Value to modify.\n * @param {number}        [startIndex] Start index.\n * @param {number}        [endIndex]   End index.\n *\n * @return {RichTextValue} A new value with the value inserted.\n */\nexport function insertLineSeparator(\n\tvalue,\n\tstartIndex = value.start,\n\tendIndex = value.end\n) {\n\tconst beforeText = getTextContent( value ).slice( 0, startIndex );\n\tconst previousLineSeparatorIndex = beforeText.lastIndexOf( LINE_SEPARATOR );\n\tconst previousLineSeparatorFormats =\n\t\tvalue.replacements[ previousLineSeparatorIndex ];\n\tlet replacements = [ , ];\n\n\tif ( previousLineSeparatorFormats ) {\n\t\treplacements = [ previousLineSeparatorFormats ];\n\t}\n\n\tconst valueToInsert = {\n\t\tformats: [ , ],\n\t\treplacements,\n\t\ttext: LINE_SEPARATOR,\n\t};\n\n\treturn insert( value, valueToInsert, startIndex, endIndex );\n}\n"]}