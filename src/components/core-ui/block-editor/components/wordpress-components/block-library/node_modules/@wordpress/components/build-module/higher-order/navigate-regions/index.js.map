{"version":3,"sources":["@wordpress/components/src/higher-order/navigate-regions/index.js"],"names":["classnames","useCallback","useState","useRef","createHigherOrderComponent","useKeyboardShortcut","rawShortcut","defaultShortcuts","previous","access","next","WrappedComponent","shortcuts","props","container","isFocusingRegions","setIsFocusingRegions","className","focusRegion","offset","regions","Array","from","current","querySelectorAll","length","nextRegion","selectedIndex","indexOf","ownerDocument","activeElement","nextIndex","focus","focusPrevious","focusNext","bindGlobal"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useState, useRef } from '@wordpress/element';\nimport {\n\tcreateHigherOrderComponent,\n\tuseKeyboardShortcut,\n} from '@wordpress/compose';\nimport { rawShortcut } from '@wordpress/keycodes';\n\nconst defaultShortcuts = {\n\tprevious: [ 'ctrl+shift+`', rawShortcut.access( 'p' ) ],\n\tnext: [ 'ctrl+`', rawShortcut.access( 'n' ) ],\n};\n\nexport default createHigherOrderComponent( ( WrappedComponent ) => {\n\treturn ( { shortcuts = defaultShortcuts, ...props } ) => {\n\t\tconst container = useRef();\n\t\tconst [ isFocusingRegions, setIsFocusingRegions ] = useState( false );\n\t\tconst className = classnames( 'components-navigate-regions', {\n\t\t\t'is-focusing-regions': isFocusingRegions,\n\t\t} );\n\n\t\tfunction focusRegion( offset ) {\n\t\t\tconst regions = Array.from(\n\t\t\t\tcontainer.current.querySelectorAll( '[role=\"region\"]' )\n\t\t\t);\n\t\t\tif ( ! regions.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet nextRegion = regions[ 0 ];\n\t\t\tconst selectedIndex = regions.indexOf(\n\t\t\t\tcontainer.current.ownerDocument.activeElement\n\t\t\t);\n\t\t\tif ( selectedIndex !== -1 ) {\n\t\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\t\tnextRegion = regions[ nextIndex ];\n\t\t\t}\n\n\t\t\tnextRegion.focus();\n\t\t\tsetIsFocusingRegions( true );\n\t\t}\n\t\tconst focusPrevious = useCallback( () => focusRegion( -1 ), [\n\t\t\tcontainer,\n\t\t] );\n\t\tconst focusNext = useCallback( () => focusRegion( 1 ), [ container ] );\n\n\t\tuseKeyboardShortcut( shortcuts.previous, focusPrevious, {\n\t\t\tbindGlobal: true,\n\t\t} );\n\t\tuseKeyboardShortcut( shortcuts.next, focusNext, { bindGlobal: true } );\n\n\t\t// Disable reason: Clicking the editor should dismiss the regions focus style\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ container }\n\t\t\t\tclassName={ className }\n\t\t\t\tonClick={ () => setIsFocusingRegions( false ) }\n\t\t\t>\n\t\t\t\t<WrappedComponent { ...props } />\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\t};\n}, 'navigateRegions' );\n"]}