{"version":3,"sources":["@wordpress/block-library/src/columns/edit.native.js"],"names":["View","dropRight","times","map","compact","delay","__","PanelBody","RangeControl","FooterMessageControl","InspectorControls","InnerBlocks","BlockControls","BlockVerticalAlignmentToolbar","BlockVariationPicker","withDispatch","useSelect","useEffect","useState","useMemo","useResizeObserver","createBlock","columns","variations","styles","getColumnWidths","ColumnsPreview","ALLOWED_BLOCKS","DEFAULT_COLUMNS_NUM","MIN_COLUMNS_NUM","MAX_COLUMNS_NUM_IN_ROW","BREAKPOINTS","mobile","large","ColumnsEditContainer","attributes","updateAlignment","updateColumns","columnCount","isSelected","onAddNextColumn","onDeleteBlock","innerColumns","updateInnerColumnWidth","resizeListener","sizes","columnsInRow","setColumnsInRow","verticalAlignment","width","newColumnCount","getColumnsInRow","contentStyle","minWidth","Math","min","columnsContainer","maxWidth","columnBaseWidth","columnWidth","margins","columnMargin","marginLeft","containerWidth","columnsNumber","max","renderAppender","getColumnsSliders","columnWidths","Object","values","column","index","value","clientId","cellContainerStyle","innerBlocksSelected","undefined","ColumnsEditContainerWrapper","dispatch","ownProps","registry","setAttributes","updateBlockAttributes","select","getBlockOrder","innerBlockClientIds","forEach","innerBlockClientId","columnId","updateBlockSettings","settings","updateBlockListSettings","previousColumns","newColumns","replaceInnerBlocks","getBlocks","getBlockAttributes","innerBlocks","isAddingColumn","selectBlock","insertedBlock","removeBlock","ColumnsEdit","props","getBlockCount","getBlock","block","isContentEmpty","innerBlock","length","isDefaultColumns","isVisible","setIsVisible"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\nimport { dropRight, times, map, compact, delay } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tPanelBody,\n\tRangeControl,\n\tFooterMessageControl,\n} from '@wordpress/components';\nimport {\n\tInspectorControls,\n\tInnerBlocks,\n\tBlockControls,\n\tBlockVerticalAlignmentToolbar,\n\tBlockVariationPicker,\n} from '@wordpress/block-editor';\nimport { withDispatch, useSelect } from '@wordpress/data';\nimport { useEffect, useState, useMemo } from '@wordpress/element';\nimport { useResizeObserver } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport { columns } from '@wordpress/icons';\n/**\n * Internal dependencies\n */\nimport variations from './variations';\nimport styles from './editor.scss';\nimport { getColumnWidths } from './utils';\nimport ColumnsPreview from '../column/column-preview';\n\n/**\n * Allowed blocks constant is passed to InnerBlocks precisely as specified here.\n * The contents of the array should never change.\n * The array should contain the name of each block that is allowed.\n * In columns block, the only block we allow is 'core/column'.\n *\n * @constant\n * @type {string[]}\n */\nconst ALLOWED_BLOCKS = [ 'core/column' ];\n\n/**\n * Number of columns to assume for template in case the user opts to skip\n * template option selection.\n *\n * @type {number}\n */\nconst DEFAULT_COLUMNS_NUM = 2;\n\n/**\n * Minimum number of columns in a row\n *\n * @type {number}\n */\nconst MIN_COLUMNS_NUM = 1;\n\n/**\n * Maximum number of columns in a row\n *\n * @type {number}\n */\nconst MAX_COLUMNS_NUM_IN_ROW = 3;\n\nconst BREAKPOINTS = {\n\tmobile: 480,\n\tlarge: 768,\n};\n\nfunction ColumnsEditContainer( {\n\tattributes,\n\tupdateAlignment,\n\tupdateColumns,\n\tcolumnCount,\n\tisSelected,\n\tonAddNextColumn,\n\tonDeleteBlock,\n\tinnerColumns,\n\tupdateInnerColumnWidth,\n} ) {\n\tconst [ resizeListener, sizes ] = useResizeObserver();\n\tconst [ columnsInRow, setColumnsInRow ] = useState( MIN_COLUMNS_NUM );\n\n\tconst { verticalAlignment } = attributes;\n\tconst { width } = sizes || {};\n\n\tconst newColumnCount = columnCount || DEFAULT_COLUMNS_NUM;\n\n\tuseEffect( () => {\n\t\tupdateColumns( columnCount, newColumnCount );\n\t}, [] );\n\n\tuseEffect( () => {\n\t\tif ( width ) {\n\t\t\tsetColumnsInRow( getColumnsInRow( width, newColumnCount ) );\n\t\t}\n\t}, [ columnCount ] );\n\n\tuseEffect( () => {\n\t\tif ( width ) {\n\t\t\tsetColumnsInRow( getColumnsInRow( width, columnCount ) );\n\t\t}\n\t}, [ width ] );\n\n\tconst contentStyle = useMemo( () => {\n\t\tconst minWidth = Math.min( width, styles.columnsContainer.maxWidth );\n\t\tconst columnBaseWidth = minWidth / columnsInRow;\n\n\t\tlet columnWidth = columnBaseWidth;\n\t\tif ( columnsInRow > 1 ) {\n\t\t\tconst margins =\n\t\t\t\tcolumnsInRow *\n\t\t\t\tMath.min( columnsInRow, MAX_COLUMNS_NUM_IN_ROW ) *\n\t\t\t\tstyles.columnMargin.marginLeft;\n\t\t\tcolumnWidth = ( minWidth - margins ) / columnsInRow;\n\t\t}\n\t\treturn { width: columnWidth };\n\t}, [ width, columnsInRow ] );\n\n\tconst getColumnsInRow = ( containerWidth, columnsNumber ) => {\n\t\tif ( containerWidth < BREAKPOINTS.mobile ) {\n\t\t\t// show only 1 Column in row for mobile breakpoint container width\n\t\t\treturn 1;\n\t\t} else if ( containerWidth < BREAKPOINTS.large ) {\n\t\t\t// show the maximum number of columns in a row for large breakpoint container width\n\t\t\treturn Math.min(\n\t\t\t\tMath.max( 1, columnCount ),\n\t\t\t\tMAX_COLUMNS_NUM_IN_ROW\n\t\t\t);\n\t\t}\n\t\t// show all Column in one row\n\t\treturn Math.max( 1, columnsNumber );\n\t};\n\n\tconst renderAppender = () => {\n\t\tif ( isSelected ) {\n\t\t\treturn (\n\t\t\t\t<View style={ columnCount === 0 && { width } }>\n\t\t\t\t\t<InnerBlocks.ButtonBlockAppender\n\t\t\t\t\t\tonAddBlock={ onAddNextColumn }\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tconst getColumnsSliders = () => {\n\t\tconst columnWidths = Object.values(\n\t\t\tgetColumnWidths( innerColumns, columnCount )\n\t\t);\n\n\t\treturn innerColumns.map( ( column, index ) => {\n\t\t\treturn (\n\t\t\t\t<RangeControl\n\t\t\t\t\tmin={ 1 }\n\t\t\t\t\tmax={ 100 }\n\t\t\t\t\tstep={ 0.1 }\n\t\t\t\t\tvalue={ columnWidths[ index ] }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tupdateInnerColumnWidth( value, column.clientId )\n\t\t\t\t\t}\n\t\t\t\t\tcellContainerStyle={ styles.cellContainerStyle }\n\t\t\t\t\tdecimalNum={ 1 }\n\t\t\t\t\trangePreview={\n\t\t\t\t\t\t<ColumnsPreview\n\t\t\t\t\t\t\tcolumnWidths={ columnWidths }\n\t\t\t\t\t\t\tselectedColumnIndex={ index }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tkey={ column.clientId }\n\t\t\t\t\tshouldDisplayTextInput={ false }\n\t\t\t\t/>\n\t\t\t);\n\t\t} );\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Columns Settings' ) }>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Number of columns' ) }\n\t\t\t\t\t\ticon={ columns }\n\t\t\t\t\t\tvalue={ columnCount }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tupdateColumns( columnCount, value )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ MIN_COLUMNS_NUM }\n\t\t\t\t\t\tmax={ columnCount + 1 }\n\t\t\t\t\t\ttype=\"stepper\"\n\t\t\t\t\t/>\n\t\t\t\t\t{ getColumnsSliders() }\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<FooterMessageControl\n\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t'Note: Column layout may vary between themes and screen sizes'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<BlockControls>\n\t\t\t\t<BlockVerticalAlignmentToolbar\n\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<View style={ isSelected && styles.innerBlocksSelected }>\n\t\t\t\t{ resizeListener }\n\t\t\t\t{ width && (\n\t\t\t\t\t<InnerBlocks\n\t\t\t\t\t\trenderAppender={ renderAppender }\n\t\t\t\t\t\torientation={\n\t\t\t\t\t\t\tcolumnsInRow > 1 ? 'horizontal' : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\thorizontal={ true }\n\t\t\t\t\t\tallowedBlocks={ ALLOWED_BLOCKS }\n\t\t\t\t\t\tcontentResizeMode=\"stretch\"\n\t\t\t\t\t\tonAddBlock={ onAddNextColumn }\n\t\t\t\t\t\tonDeleteBlock={\n\t\t\t\t\t\t\tcolumnCount === 1 ? onDeleteBlock : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontentStyle={ contentStyle }\n\t\t\t\t\t\tparentWidth={ width }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</View>\n\t\t</>\n\t);\n}\n\nconst ColumnsEditContainerWrapper = withDispatch(\n\t( dispatch, ownProps, registry ) => ( {\n\t\t/**\n\t\t * Update all child Column blocks with a new vertical alignment setting\n\t\t * based on whatever alignment is passed in. This allows change to parent\n\t\t * to overide anything set on a individual column basis.\n\t\t *\n\t\t * @param {string} verticalAlignment the vertical alignment setting\n\t\t */\n\t\tupdateAlignment( verticalAlignment ) {\n\t\t\tconst { clientId, setAttributes } = ownProps;\n\t\t\tconst { updateBlockAttributes } = dispatch( 'core/block-editor' );\n\t\t\tconst { getBlockOrder } = registry.select( 'core/block-editor' );\n\n\t\t\t// Update own alignment.\n\t\t\tsetAttributes( { verticalAlignment } );\n\n\t\t\t// Update all child Column Blocks to match\n\t\t\tconst innerBlockClientIds = getBlockOrder( clientId );\n\t\t\tinnerBlockClientIds.forEach( ( innerBlockClientId ) => {\n\t\t\t\tupdateBlockAttributes( innerBlockClientId, {\n\t\t\t\t\tverticalAlignment,\n\t\t\t\t} );\n\t\t\t} );\n\t\t},\n\t\tupdateInnerColumnWidth( value, columnId ) {\n\t\t\tconst { updateBlockAttributes } = dispatch( 'core/block-editor' );\n\n\t\t\tupdateBlockAttributes( columnId, {\n\t\t\t\twidth: value,\n\t\t\t} );\n\t\t},\n\t\tupdateBlockSettings( settings ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { updateBlockListSettings } = dispatch( 'core/block-editor' );\n\t\t\tupdateBlockListSettings( clientId, settings );\n\t\t},\n\t\t/**\n\t\t * Updates the column columnCount, including necessary revisions to child Column\n\t\t * blocks to grant required or redistribute available space.\n\t\t *\n\t\t * @param {number} previousColumns Previous column columnCount.\n\t\t * @param {number} newColumns      New column columnCount.\n\t\t */\n\t\tupdateColumns( previousColumns, newColumns ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { replaceInnerBlocks } = dispatch( 'core/block-editor' );\n\t\t\tconst { getBlocks, getBlockAttributes } = registry.select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\n\t\t\tlet innerBlocks = getBlocks( clientId );\n\n\t\t\t// Redistribute available width for existing inner blocks.\n\t\t\tconst isAddingColumn = newColumns > previousColumns;\n\n\t\t\tif ( isAddingColumn ) {\n\t\t\t\t// Get verticalAlignment from Columns block to set the same to new Column\n\t\t\t\tconst { verticalAlignment } =\n\t\t\t\t\tgetBlockAttributes( clientId ) || {};\n\n\t\t\t\tinnerBlocks = [\n\t\t\t\t\t...innerBlocks,\n\t\t\t\t\t...times( newColumns - previousColumns, () => {\n\t\t\t\t\t\treturn createBlock( 'core/column', {\n\t\t\t\t\t\t\tverticalAlignment,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} ),\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\t// The removed column will be the last of the inner blocks.\n\t\t\t\tinnerBlocks = dropRight(\n\t\t\t\t\tinnerBlocks,\n\t\t\t\t\tpreviousColumns - newColumns\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treplaceInnerBlocks( clientId, innerBlocks, false );\n\t\t},\n\t\tonAddNextColumn: () => {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { replaceInnerBlocks, selectBlock } = dispatch(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\t\t\tconst { getBlocks, getBlockAttributes } = registry.select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\n\t\t\t// Get verticalAlignment from Columns block to set the same to new Column\n\t\t\tconst { verticalAlignment } = getBlockAttributes( clientId );\n\n\t\t\tconst innerBlocks = getBlocks( clientId );\n\n\t\t\tconst insertedBlock = createBlock( 'core/column', {\n\t\t\t\tverticalAlignment,\n\t\t\t} );\n\n\t\t\treplaceInnerBlocks(\n\t\t\t\tclientId,\n\t\t\t\t[ ...innerBlocks, insertedBlock ],\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tselectBlock( insertedBlock.clientId );\n\t\t},\n\t\tonDeleteBlock: () => {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { removeBlock } = dispatch( 'core/block-editor' );\n\t\t\tremoveBlock( clientId );\n\t\t},\n\t} )\n)( ColumnsEditContainer );\n\nconst ColumnsEdit = ( props ) => {\n\tconst { clientId, isSelected } = props;\n\tconst { columnCount, isDefaultColumns, innerColumns = [] } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockCount, getBlock } = select( 'core/block-editor' );\n\t\t\tconst block = getBlock( clientId );\n\t\t\tconst innerBlocks = block?.innerBlocks;\n\t\t\tconst isContentEmpty = map(\n\t\t\t\tinnerBlocks,\n\t\t\t\t( innerBlock ) => innerBlock.innerBlocks.length\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tcolumnCount: getBlockCount( clientId ),\n\t\t\t\tisDefaultColumns: ! compact( isContentEmpty ).length,\n\t\t\t\tinnerColumns: innerBlocks,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst [ isVisible, setIsVisible ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( isSelected && isDefaultColumns ) {\n\t\t\tdelay( () => setIsVisible( true ), 100 );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t<ColumnsEditContainerWrapper\n\t\t\t\tcolumnCount={ columnCount }\n\t\t\t\tinnerColumns={ innerColumns }\n\t\t\t\t{ ...props }\n\t\t\t/>\n\t\t\t<BlockVariationPicker\n\t\t\t\tvariations={ variations }\n\t\t\t\tonClose={ () => setIsVisible( false ) }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tisVisible={ isVisible }\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default ColumnsEdit;\n"]}