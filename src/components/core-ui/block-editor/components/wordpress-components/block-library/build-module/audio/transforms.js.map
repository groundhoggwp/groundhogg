{"version":3,"sources":["@wordpress/block-library/src/audio/transforms.js"],"names":["createBlobURL","createBlock","transforms","from","type","isMatch","files","length","indexOf","transform","file","block","src","tag","attributes","shortcode","named","mp3","m4a","ogg","wav","wma","loop","autoplay","preload"],"mappings":"AAAA;;;AAGA,SAASA,aAAT,QAA8B,iBAA9B;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAEA,IAAMC,UAAU,GAAG;AAClBC,EAAAA,IAAI,EAAE,CACL;AACCC,IAAAA,IAAI,EAAE,OADP;AAECC,IAAAA,OAFD,mBAEUC,KAFV,EAEkB;AAChB,aACCA,KAAK,CAACC,MAAN,KAAiB,CAAjB,IACAD,KAAK,CAAE,CAAF,CAAL,CAAWF,IAAX,CAAgBI,OAAhB,CAAyB,QAAzB,MAAwC,CAFzC;AAIA,KAPF;AAQCC,IAAAA,SARD,qBAQYH,KARZ,EAQoB;AAClB,UAAMI,IAAI,GAAGJ,KAAK,CAAE,CAAF,CAAlB,CADkB,CAElB;AACA;AACA;;AACA,UAAMK,KAAK,GAAGV,WAAW,CAAE,YAAF,EAAgB;AACxCW,QAAAA,GAAG,EAAEZ,aAAa,CAAEU,IAAF;AADsB,OAAhB,CAAzB;AAIA,aAAOC,KAAP;AACA;AAlBF,GADK,EAqBL;AACCP,IAAAA,IAAI,EAAE,WADP;AAECS,IAAAA,GAAG,EAAE,OAFN;AAGCC,IAAAA,UAAU,EAAE;AACXF,MAAAA,GAAG,EAAE;AACJR,QAAAA,IAAI,EAAE,QADF;AAEJW,QAAAA,SAAS,EAAE,yBAEJ;AAAA,gCADNC,KACM;AAAA,cADGJ,GACH,cADGA,GACH;AAAA,cADQK,GACR,cADQA,GACR;AAAA,cADaC,GACb,cADaA,GACb;AAAA,cADkBC,GAClB,cADkBA,GAClB;AAAA,cADuBC,GACvB,cADuBA,GACvB;AAAA,cAD4BC,GAC5B,cAD4BA,GAC5B;AACN,iBAAOT,GAAG,IAAIK,GAAP,IAAcC,GAAd,IAAqBC,GAArB,IAA4BC,GAA5B,IAAmCC,GAA1C;AACA;AANG,OADM;AASXC,MAAAA,IAAI,EAAE;AACLlB,QAAAA,IAAI,EAAE,QADD;AAELW,QAAAA,SAAS,EAAE,0BAA2B;AAAA,cAAdO,IAAc,SAAvBN,KAAuB,CAAdM,IAAc;AACrC,iBAAOA,IAAP;AACA;AAJI,OATK;AAeXC,MAAAA,QAAQ,EAAE;AACTnB,QAAAA,IAAI,EAAE,QADG;AAETW,QAAAA,SAAS,EAAE,0BAA+B;AAAA,cAAlBQ,QAAkB,SAA3BP,KAA2B,CAAlBO,QAAkB;AACzC,iBAAOA,QAAP;AACA;AAJQ,OAfC;AAqBXC,MAAAA,OAAO,EAAE;AACRpB,QAAAA,IAAI,EAAE,QADE;AAERW,QAAAA,SAAS,EAAE,0BAA8B;AAAA,cAAjBS,OAAiB,SAA1BR,KAA0B,CAAjBQ,OAAiB;AACxC,iBAAOA,OAAP;AACA;AAJO;AArBE;AAHb,GArBK;AADY,CAAnB;AAyDA,eAAetB,UAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { createBlobURL } from '@wordpress/blob';\nimport { createBlock } from '@wordpress/blocks';\n\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'files',\n\t\t\tisMatch( files ) {\n\t\t\t\treturn (\n\t\t\t\t\tfiles.length === 1 &&\n\t\t\t\t\tfiles[ 0 ].type.indexOf( 'audio/' ) === 0\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform( files ) {\n\t\t\t\tconst file = files[ 0 ];\n\t\t\t\t// We don't need to upload the media directly here\n\t\t\t\t// It's already done as part of the `componentDidMount`\n\t\t\t\t// in the audio block\n\t\t\t\tconst block = createBlock( 'core/audio', {\n\t\t\t\t\tsrc: createBlobURL( file ),\n\t\t\t\t} );\n\n\t\t\t\treturn block;\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ttype: 'shortcode',\n\t\t\ttag: 'audio',\n\t\t\tattributes: {\n\t\t\t\tsrc: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( {\n\t\t\t\t\t\tnamed: { src, mp3, m4a, ogg, wav, wma },\n\t\t\t\t\t} ) => {\n\t\t\t\t\t\treturn src || mp3 || m4a || ogg || wav || wma;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tloop: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( { named: { loop } } ) => {\n\t\t\t\t\t\treturn loop;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tautoplay: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( { named: { autoplay } } ) => {\n\t\t\t\t\t\treturn autoplay;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpreload: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tshortcode: ( { named: { preload } } ) => {\n\t\t\t\t\t\treturn preload;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n"]}