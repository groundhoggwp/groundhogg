{"version":3,"sources":["@wordpress/block-editor/src/components/inner-blocks/get-block-context.js"],"names":["mapValues","BLOCK_CONTEXT_CACHE","WeakMap","getBlockContext","attributes","blockType","has","set","blockTypeCache","get","context","providesContext","attributeName"],"mappings":"AAAA;;;AAGA,SAASA,SAAT,QAA0B,QAA1B;AAEA;;;;;;;AAMA,IAAMC,mBAAmB,GAAG,IAAIC,OAAJ,EAA5B;AAEA;;;;;;;;;;AASA,eAAe,SAASC,eAAT,CAA0BC,UAA1B,EAAsCC,SAAtC,EAAkD;AAChE,MAAK,CAAEJ,mBAAmB,CAACK,GAApB,CAAyBD,SAAzB,CAAP,EAA8C;AAC7CJ,IAAAA,mBAAmB,CAACM,GAApB,CAAyBF,SAAzB,EAAoC,IAAIH,OAAJ,EAApC;AACA;;AAED,MAAMM,cAAc,GAAGP,mBAAmB,CAACQ,GAApB,CAAyBJ,SAAzB,CAAvB;;AACA,MAAK,CAAEG,cAAc,CAACF,GAAf,CAAoBF,UAApB,CAAP,EAA0C;AACzC,QAAMM,OAAO,GAAGV,SAAS,CACxBK,SAAS,CAACM,eADc,EAExB,UAAEC,aAAF;AAAA,aAAqBR,UAAU,CAAEQ,aAAF,CAA/B;AAAA,KAFwB,CAAzB;AAKAJ,IAAAA,cAAc,CAACD,GAAf,CAAoBH,UAApB,EAAgCM,OAAhC;AACA;;AAED,SAAOF,cAAc,CAACC,GAAf,CAAoBL,UAApB,CAAP;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport { mapValues } from 'lodash';\n\n/**\n * Block context cache, implemented as a WeakMap mapping block types to a\n * WeakMap mapping attributes object to context value.\n *\n * @type {WeakMap<string,WeakMap<string,*>>}\n */\nconst BLOCK_CONTEXT_CACHE = new WeakMap();\n\n/**\n * Returns a cached context object value for a given set of attributes for the\n * block type.\n *\n * @param {Record<string,*>} attributes Block attributes object.\n * @param {WPBlockType}      blockType  Block type settings.\n *\n * @return {Record<string,*>} Context value.\n */\nexport default function getBlockContext( attributes, blockType ) {\n\tif ( ! BLOCK_CONTEXT_CACHE.has( blockType ) ) {\n\t\tBLOCK_CONTEXT_CACHE.set( blockType, new WeakMap() );\n\t}\n\n\tconst blockTypeCache = BLOCK_CONTEXT_CACHE.get( blockType );\n\tif ( ! blockTypeCache.has( attributes ) ) {\n\t\tconst context = mapValues(\n\t\t\tblockType.providesContext,\n\t\t\t( attributeName ) => attributes[ attributeName ]\n\t\t);\n\n\t\tblockTypeCache.set( attributes, context );\n\t}\n\n\treturn blockTypeCache.get( attributes );\n}\n"]}